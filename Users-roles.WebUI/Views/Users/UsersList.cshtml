@model UsersListViewModel

@{
    ViewData["Title"] = "Users List";
}

<h2>Users List</h2>

<div>
    <div class="row">
        <div class="col-md-6"><strong>User</strong></div>
        @foreach (var role in Model.AllRoles)
        {
            <div class="col-md-1"><strong>@role.RoleName</strong></div>
        }
    </div>
    @foreach (var user in Model.Users)
    {
        <hr/>
        <div class="row">
            <div class="col-md-6">
                <div>@user.Name</div>
                <div>@user.Email</div>
            </div>
            @foreach (var role in Model.AllRoles)
            {
                <div class="col-md-1">
                    @if (user.Roles.Any(u => u.RoleId == role.Id))
                    {
                        <input id="input-@(user.Id)-@(role.Id)" type="checkbox" name="role" checked onchange="editUserRoles('@user.Id','@role.Id')">
                    }
                    else
                    {
                        <input id="input-@(user.Id)-@(role.Id)" type="checkbox" name="role" onchange="editUserRoles('@user.Id','@role.Id')">
                    }
                </div>
            }
        </div>
    }
</div>
<script src="../App/Src/Js/Users/EditUserRoles.js"></script>